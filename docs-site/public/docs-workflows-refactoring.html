<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>♻️ Refactoring Workflow - Neovim Config Docs</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 280px 1fr;
      grid-template-areas: "sidebar main";
      gap: 30px;
      align-items: start;
    }
    
    nav {
      grid-area: sidebar;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 20px;
      height: fit-content;
      position: sticky;
      top: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      min-width: 0; /* Prevent overflow issues */
    }
    
    nav h2 {
      color: #333;
      margin-bottom: 15px;
      font-size: 1.2em;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    
    nav ul {
      list-style: none;
    }
    
    nav li {
      margin: 8px 0;
    }
    
    nav a {
      color: #555;
      text-decoration: none;
      padding: 8px 12px;
      display: block;
      border-radius: 6px;
      transition: all 0.3s;
    }
    
    nav a:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: translateX(5px);
    }
    
    nav a.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    main {
      grid-area: main;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 40px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      min-width: 0; /* Prevent overflow issues */
      overflow-wrap: break-word;
    }
    
    h1 {
      color: #333;
      margin-bottom: 30px;
      font-size: 2.5em;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    h2 {
      color: #444;
      margin: 30px 0 15px;
      font-size: 1.8em;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 10px;
    }
    
    h3 {
      color: #555;
      margin: 25px 0 12px;
      font-size: 1.4em;
    }
    
    h4 {
      color: #666;
      margin: 20px 0 10px;
      font-size: 1.2em;
    }
    
    p {
      color: #555;
      margin: 15px 0;
    }
    
    pre {
      background: #1e1e1e;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 20px 0;
      border: 1px solid #333;
    }
    
    code {
      font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;
      font-size: 0.9em;
    }
    
    :not(pre) > code {
      background: #f0f0f0;
      padding: 2px 6px;
      border-radius: 4px;
      color: #d73a49;
    }
    
    ul, ol {
      margin: 15px 0;
      padding-left: 30px;
      color: #555;
    }
    
    li {
      margin: 8px 0;
    }
    
    a {
      color: #667eea;
      text-decoration: none;
      border-bottom: 1px solid transparent;
      transition: border-color 0.3s;
    }
    
    a:hover {
      border-bottom-color: #667eea;
    }
    
    blockquote {
      border-left: 4px solid #667eea;
      padding-left: 20px;
      margin: 20px 0;
      color: #666;
      font-style: italic;
      background: #f8f8f8;
      padding: 15px 20px;
      border-radius: 0 8px 8px 0;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    
    th {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    
    .home-hero {
      text-align: center;
      padding: 40px 0;
      border-bottom: 2px solid #e0e0e0;
      margin-bottom: 30px;
    }
    
    .home-hero h1 {
      font-size: 3em;
      margin-bottom: 20px;
    }
    
    .home-hero p {
      font-size: 1.2em;
      color: #666;
    }
    
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    
    .feature-card {
      background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%);
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #667eea30;
    }
    
    .feature-card h3 {
      color: #667eea;
      margin-bottom: 10px;
    }
    
    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "sidebar"
          "main";
      }
      
      nav {
        position: static;
        grid-area: sidebar;
      }
      
      main {
        grid-area: main;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <nav>
      
  <h2>📚 Documentation</h2>
  <ul>
    <li><a href="index.html">Home</a></li><li><a href="readme-main.html">🚀 JetBrains-Style Neovim Configuration</a></li><li><a href="testing-guide.html">🧪 Complete Testing Guide</a></li><li><a href="claude.html">CLAUDE.md - AI Assistant Instructions</a></li><li><a href="jetbrains-shortcuts.html">🚀 JetBrains-Style Shortcuts (Space + Number System)</a></li><li><a href="run.html">🚀 RUN.md - How to Use This Neovim Configuration</a></li><li><a href="shortcut-migration.html">🔄 Shortcut Migration Complete!</a></li><li><a href="keymap-cheatsheet.html">🔑 Keymap Cheatsheet</a></li><li><a href="learning-vim.html">🎓 Learning Vim: From JetBrains to Neovim</a></li><li><a href="overview.html">📘 Overview: JetBrains Parity in Neovim</a></li><li><a href="test-explanation.html">✅ Test Suite: Always Passing</a></li><li><a href="docs-workflows-debugging.html">🐛 Debugging Workflow with nvim-dap</a></li><li><a href="docs-workflows-multicursor.html">🎯 Multi-cursor Workflow</a></li><li><a href="docs-workflows-refactoring.html">♻️ Refactoring Workflow</a></li><li><a href="docs-workflows-services.html">🐳 Services & Docker Workflow</a></li><li><a href="docs-workflows-structure.html">🏗 Code Structure & Symbol Navigation</a></li><li><a href="docs-workflows-testing.html">🧪 Testing Workflow with Neotest</a></li><li><a href="test-readme.html">🧪 Test Suite Documentation</a></li><li><a href="vim-game-readme.html">🎮 VimGame - Interactive Neovim Learning Framework</a></li><li><a href="vim-game-todo.html">VimGame Development TODO</a></li><li><a href="vim-game-vimgame-ready.html">🎮 VimGame is Ready! </a></li><li><a href="vim-game-specs-architecture.html">VimGame Architecture Specification</a></li>
  </ul>

    </nav>
    <main>
      <h1>♻️ Refactoring Workflow</h1>
<p><strong><a href="debugging.md">← Previous: Debugging Workflow</a></strong> | <strong><a href="multicursor.md">Next: Multi-cursor Workflow →</a></strong></p>
<hr>
<h2>Overview</h2>
<p>This configuration provides JetBrains-style refactoring capabilities through LSP and dedicated refactoring plugins. All refactorings are project-wide and maintain code correctness.</p>
<h2>🚀 Essential Refactorings</h2>
<table>
<thead>
<tr>
<th>Action</th>
<th>Key</th>
<th>JetBrains Equivalent</th>
</tr>
</thead>
<tbody><tr>
<td>Rename Symbol</td>
<td><code>⇧F6</code></td>
<td>Shift+F6 (Rename)</td>
</tr>
<tr>
<td>Move File</td>
<td><code>F6</code></td>
<td>F6 (Move)</td>
</tr>
<tr>
<td>Extract Method</td>
<td><code>M</code> (visual)</td>
<td>Ctrl+Alt+M</td>
</tr>
<tr>
<td>Extract Variable</td>
<td><code>&lt;leader&gt;rv</code></td>
<td>Ctrl+Alt+V</td>
</tr>
<tr>
<td>Inline Variable</td>
<td><code>⌘⌥N</code></td>
<td>Ctrl+Alt+N</td>
</tr>
<tr>
<td>Extract Function</td>
<td><code>&lt;leader&gt;re</code></td>
<td>Extract Method</td>
</tr>
</tbody></table>
<h2>📝 Rename Refactoring</h2>
<h3>Rename Symbol (⇧F6)</h3>
<p>The most common refactoring - works across entire project:</p>
<pre><code class="language-javascript">// Before: Place cursor on &#39;oldName&#39;
const oldName = &quot;value&quot;;
console.log(oldName);
export { oldName };

// Press ⇧F6, type &#39;newName&#39;
// After:
const newName = &quot;value&quot;;
console.log(newName);
export { newName };
</code></pre>
<h3>Rename Features</h3>
<ul>
<li><strong>Project-wide</strong>: Updates all references</li>
<li><strong>Preview</strong>: See changes before applying</li>
<li><strong>Undo-friendly</strong>: Single undo reverts all</li>
<li><strong>Smart</strong>: Handles imports/exports</li>
</ul>
<h3>Advanced Rename</h3>
<pre><code class="language-vim">&quot; Rename with preview
&lt;leader&gt;rn

&quot; Force rename (skip confirmation)
&lt;leader&gt;rN

&quot; Rename file and update imports
F6
</code></pre>
<h2>🔄 Extract Refactorings</h2>
<h3>Extract Method/Function</h3>
<p>Select code and press <code>M</code> (visual mode) or <code>&lt;leader&gt;re</code>:</p>
<pre><code class="language-javascript">// Before: Select lines 2-4
function processUser(user) {
  const name = user.firstName + &#39; &#39; + user.lastName;
  const email = name.toLowerCase().replace(&#39; &#39;, &#39;.&#39;) + &#39;@example.com&#39;;
  user.email = email;
  return user;
}

// After: Extract Method
function processUser(user) {
  user.email = generateEmail(user);
  return user;
}

function generateEmail(user) {
  const name = user.firstName + &#39; &#39; + user.lastName;
  const email = name.toLowerCase().replace(&#39; &#39;, &#39;.&#39;) + &#39;@example.com&#39;;
  return email;
}
</code></pre>
<h3>Extract Variable</h3>
<p>Select expression and press <code>&lt;leader&gt;rv</code>:</p>
<pre><code class="language-javascript">// Before: Select the expression
if (user.age &gt; 18 &amp;&amp; user.country === &#39;US&#39;) {
  // ...
}

// After: Extract Variable
const isEligible = user.age &gt; 18 &amp;&amp; user.country === &#39;US&#39;;
if (isEligible) {
  // ...
}
</code></pre>
<h3>Extract to File</h3>
<p>For larger extractions:</p>
<pre><code class="language-vim">&quot; Extract function to new file
&lt;leader&gt;rf

&quot; Extract component to file (React/Vue)
&lt;leader&gt;rc
</code></pre>
<h2>📥 Inline Refactorings</h2>
<h3>Inline Variable (⌘⌥N)</h3>
<p>Remove unnecessary variables:</p>
<pre><code class="language-javascript">// Before: Cursor on &#39;temp&#39;
const temp = calculateValue();
return temp;

// Press ⌘⌥N
// After:
return calculateValue();
</code></pre>
<h3>Inline Function</h3>
<pre><code class="language-javascript">// Before: Cursor on function name
function getValue() {
  return 42;
}
const result = getValue();

// Press &lt;leader&gt;ri
// After:
const result = 42;
</code></pre>
<h2>🚀 Advanced Refactorings</h2>
<h3>Change Function Signature</h3>
<pre><code class="language-vim">&quot; Change signature
&lt;leader&gt;rs

&quot; Interactive mode:
&quot; 1. Add parameter
&quot; 2. Remove parameter
&quot; 3. Reorder parameters
&quot; 4. Change parameter names
</code></pre>
<p>Example:</p>
<pre><code class="language-javascript">// Before
function greet(name) {
  return `Hello ${name}`;
}

// Change Signature: Add &#39;greeting&#39; parameter
// After
function greet(greeting, name) {
  return `${greeting} ${name}`;
}
// All call sites updated automatically
</code></pre>
<h3>Convert Refactorings</h3>
<pre><code class="language-vim">&quot; Convert function declaration
&lt;leader&gt;rcf
</code></pre>
<p>Examples:</p>
<pre><code class="language-javascript">// Arrow to function declaration
const fn = () =&gt; { }  →  function fn() { }

// Function to arrow
function fn() { }  →  const fn = () =&gt; { }

// Async/await to promises
async function load() {  →  function load() {
  await fetch()              return fetch().then()
}                         }
</code></pre>
<h3>Pull Up / Push Down</h3>
<p>For class hierarchies:</p>
<pre><code class="language-vim">&quot; Pull member up to parent class
&lt;leader&gt;rpu

&quot; Push member down to subclasses  
&lt;leader&gt;rpd
</code></pre>
<h2>🎯 Code Actions</h2>
<h3>Quick Fixes (⌘.)</h3>
<p>Context-aware refactorings:</p>
<pre><code class="language-javascript">// Cursor on undefined variable
undefinedVar  // Press ⌘.
// Options:
// 1. Create variable &#39;undefinedVar&#39;
// 2. Import &#39;undefinedVar&#39;
// 3. Change to similar name

// Cursor on unused variable
const unused = 5;  // Press ⌘.
// Options:
// 1. Remove unused variable
// 2. Prefix with underscore
</code></pre>
<h3>Import Management</h3>
<pre><code class="language-vim">&quot; Organize imports
&lt;leader&gt;ro

&quot; Add missing imports
&lt;leader&gt;ra

&quot; Remove unused imports
&lt;leader&gt;ru
</code></pre>
<h2>🔍 Safe Refactoring</h2>
<h3>Preview Changes</h3>
<p>Before applying refactoring:</p>
<pre><code class="language-vim">&quot; Preview rename
:RenamePreview

&quot; Preview with Telescope
&lt;leader&gt;rp
</code></pre>
<p>Preview window shows:</p>
<pre><code>Changes to be applied:
─────────────────────
src/index.js
  - const oldName = 
  + const newName =

src/utils.js  
  - import { oldName }
  + import { newName }
  
Apply changes? [Y/n]
</code></pre>
<h3>Refactoring with Tests</h3>
<p>Best practice workflow:</p>
<ol>
<li>Run tests: <code>&lt;leader&gt;tt</code></li>
<li>Apply refactoring</li>
<li>Run tests again</li>
<li>Commit if green</li>
</ol>
<h2>💡 Language-Specific</h2>
<h3>JavaScript/TypeScript</h3>
<pre><code class="language-vim">&quot; Convert to template literal
&lt;leader&gt;rtl

&quot; Convert to optional chaining
&lt;leader&gt;roc

&quot; Destructure object
&lt;leader&gt;rdo
</code></pre>
<h3>Python</h3>
<pre><code class="language-vim">&quot; Extract to method
&lt;leader&gt;rem

&quot; Convert to f-string
&lt;leader&gt;rfs

&quot; Add type hints
&lt;leader&gt;rth
</code></pre>
<h3>React/Vue Components</h3>
<pre><code class="language-vim">&quot; Extract component
&lt;leader&gt;rxc

&quot; Convert to functional component
&lt;leader&gt;rxf

&quot; Extract hook
&lt;leader&gt;rxh
</code></pre>
<h2>🛡 Undo/Redo Refactoring</h2>
<h3>Undo Last Refactoring</h3>
<pre><code class="language-vim">&quot; Standard undo
u

&quot; Undo entire refactoring session
&lt;leader&gt;rU
</code></pre>
<h3>Refactoring History</h3>
<pre><code class="language-vim">&quot; View refactoring history
:RefactorHistory

&quot; Replay refactoring
:RefactorReplay
</code></pre>
<h2>⚙️ Configuration</h2>
<h3>Custom Refactorings</h3>
<p>Add to <code>lua/config/refactoring.lua</code>:</p>
<pre><code class="language-lua">local refactoring = require(&quot;refactoring&quot;)

refactoring.setup({
  -- Custom extract configurations
  extract = {
    -- Extract to const instead of let
    prefer_const = true,
    -- Always use arrow functions
    arrow_functions = true,
  },
  
  -- Prompt for names
  prompt_func_return_type = {
    javascript = true,
    typescript = true,
  },
})
</code></pre>
<h3>Keybinding Customization</h3>
<pre><code class="language-lua">-- Add more refactoring shortcuts
vim.keymap.set(&quot;v&quot;, &quot;&lt;leader&gt;rec&quot;, function()
  require(&quot;refactoring&quot;).extract_component()
end, { desc = &quot;Extract Component&quot; })
</code></pre>
<h2>📚 Refactoring Patterns</h2>
<h3>1. Extract-Method Pattern</h3>
<pre><code>Select code → M → Name method → Enter
</code></pre>
<h3>2. Rename-Move Pattern</h3>
<pre><code>⇧F6 (rename) → F6 (move file) → Update imports
</code></pre>
<h3>3. Inline-Extract Pattern</h3>
<pre><code>Inline complex (⌘⌥N) → Extract simple (&lt;leader&gt;rv)
</code></pre>
<h2>🚨 Troubleshooting</h2>
<h3>Refactoring Not Available</h3>
<ol>
<li>Ensure LSP is running: <code>:LspInfo</code></li>
<li>Check file is saved</li>
<li>Verify no syntax errors</li>
</ol>
<h3>Incomplete Refactoring</h3>
<ol>
<li>Check all files are saved</li>
<li>Ensure project root is correct</li>
<li>Try <code>:LspRestart</code></li>
</ol>
<h3>Performance Issues</h3>
<ol>
<li>Limit search scope</li>
<li>Close unnecessary files</li>
<li>Use preview first</li>
</ol>
<hr>
<p><strong><a href="debugging.md">← Previous: Debugging Workflow</a></strong> | <strong><a href="multicursor.md">Next: Multi-cursor Workflow →</a></strong></p>

    </main>
  </div>
</body>
</html>